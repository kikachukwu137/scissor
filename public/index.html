<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Scissors Url Shortener Web Application" />
    <link rel="stylesheet" href="./style.css" />
    <title>Scissor.</title>
    <style>
      /* Reset default browser styles */
      body,
      h1,
      h2,
      h3,
      p,
      ul,
      li,
      button,
      input {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        background-color: #f4f4f4;
        color: #333;
      }

      header {
        background-color: #333;
        color: #fff;
        padding: 10px 20px;
        text-align: center;
      }

      header h1 {
        margin-bottom: 10px;
        font-size: 2em;
      }

      nav ul {
        list-style: none;
        padding: 0;
      }

      nav ul li {
        display: inline;
        margin: 0 10px;
      }

      nav ul li a {
        color: #fff;
        text-decoration: none;
        padding: 5px 10px;
        border-radius: 5px;
        transition: background-color 0.3s ease;
      }

      nav ul li a:hover {
        background-color: #555;
      }

      nav ul li ul {
        display: none;
        position: absolute;
        background-color: #333;
        padding: 10px;
        list-style: none;
        margin-top: 10px;
        border-radius: 5px;
      }

      nav ul li:hover ul {
        display: block;
      }

      button {
        background-color: #007bff;
        color: #fff;
        border: none;
        padding: 10px 20px;
        cursor: pointer;
        font-size: 16px;
        margin: 0 5px;
        border-radius: 5px;
        transition: background-color 0.3s ease;
      }

      button:hover {
        background-color: #0056b3;
      }

      section {
        padding: 20px;
        max-width: 800px;
        margin: 20px auto;
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      }

      h2,
      h3 {
        color: #333;
        margin-bottom: 10px;
      }

      form {
        display: flex;
        flex-direction: column;
      }

      form input[type='url'],
      form input[type='text'] {
        margin-bottom: 10px;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
        width: 100%;
        box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
      }

      form button {
        padding: 10px;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      form button:hover {
        background-color: #0056b3;
      }

      ol {
        margin: 20px 0;
      }

      ol li {
        margin-bottom: 10px;
      }

      footer {
        background-color: #333;
        color: #fff;
        text-align: center;
        padding: 10px 20px;
        border-radius: 0 0 8px 8px;
      }

      footer a {
        color: #fff;
        text-decoration: none;
        border-radius: 5px;
        transition: color 0.3s ease;
      }

      footer a:hover {
        color: #ddd;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        nav ul li {
          display: block;
          margin: 10px 0;
        }

        nav ul li ul {
          position: static;
          padding: 0;
          margin-top: 0;
        }

        button {
          width: 100%;
          margin: 5px 0;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Scissor</h1>
      <nav>
        <ul>
          <li><a href="#AboutUs">Features</a></li>
          <li><a href="#FAQs">FAQs</a></li>
          <li>
            <a href="#MyAccount">My Account</a>
            <ul>
              <li><a href="#LinkHistory">Link History</a></li>
              <li><a href="#UpdateAccount">Update Account</a></li>
              <li><a href="#DeleteAccount">Delete Account</a></li>
            </ul>
          </li>
        </ul>
      </nav>
      <a href="./login.html"><button>Login</button></a>
      <a href="./register.html"><button>SignUp</button></a>
    </header>
    <section>
      <h2>Make That Event/Invite Link Shorter! Super Fast!</h2>
      <p>
        Experience the ease and elegance of Scissor: streamline, personalize,
        and track your links with our cutting-edge Url shortening solution.
      </p>
      <hr />
      <p>Enter Your Link Now to Shorten it.</p>
      <form action="" id="shorteningLink">
        <label for="shorteningLink"></label>
        <input
          type="url"
          id="shorteningLink"
          required
          placeholder="Enter Link to be Shortened."
        />
        <button type="submit">Shorten Link</button>
      </form>

      <br /><br />

      <!-- Form for customizing the short URL -->
      <form id="customizeShortUrlForm">
        <label for="customizingLink"></label>
        <input
          type="text"
          id="customizingLink"
          required
          placeholder="Customize Your Generated Short URL"
        />
        <input
          type="text"
          id="originalShortUrl"
          required
          placeholder="Enter Original Short URL"
        />
        <button type="submit">Customize Link</button>
      </form>

      <br /><br />

      <!-- Form for generating a QR code -->
      <form action="" id="generateQrCode">
        <label for="generateQrCode"></label>
        <input
          type="text"
          id="generateQrCode"
          placeholder="Enter Short URL to Generate a QR Code"
        />
        <button type="submit">Generate QR Code</button>
      </form>
    </section>
    <h3 id="AboutUs">What Makes Us Different</h3>
    <ol>
      <li>
        Url Shortening: Users can shorten long Urls using the Scissor Platform.
      </li>
      <li>
        Custom Urls: Users can customize their shortened Urls, with their own
        domain name and custom text, useful for branding purposes.
      </li>
      <li>
        QrCode Generation: Users can generate and download Qr codes for their
        shortened Url, integrating these codes into promotional materials or
        websites.
      </li>
      <li>
        Basic Analytics: Scissor provides analytics to track the performance of
        shortened Urls, including number of clicks and origin of these clicks.
      </li>
      <li>
        Link History: Users can view the history of links they've created,
        allowing them to track and retrieve all the URLs they have shortened.
      </li>
    </ol>
    <footer>
      <p>Scissor.</p>
      <p>
        <a href="#LinkHistory">Link History</a> |
        <a href="#UpdateAccount">Update Account</a> |
        <a href="#DeleteAccount">Delete Account</a>
      </p>
      <p>
        Built By
        <a href="https://github.com/Nzube-ctrl" target="_blank">Nzube Uwakwe</a>
      </p>
      <p>&copy; 2024. Scissor. All Rights Reserved.</p>
    </footer>
    <script>
      //Handling link shortening
      document
        .getElementById('shorteningLink')
        .addEventListener('submit', async function (event) {
          event.preventDefault();
          const originalUrl = document.getElementById('shorteningLink').value;
          const customUrl = document.getElementById('customUrl').value;
          try {
            // Make the POST request to your server
            const response = await fetch('/api/shorten', {
              // Endpoint '/shorten'
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                Authorization: `Bearer ${your_jwt_token}`, // Add your JWT token here
              },
              body: JSON.stringify({
                originalUrl: originalUrl,
                customUrl: customUrl || null,
              }),
            });

            if (response.ok) {
              const redirectLink = await response.text();
              alert(`Shortened URL: ${redirectLink}`);
            } else {
              const error = await response.json();
              alert(`Error: ${error.message}`);
            }
          } catch (error) {
            console.error('Error:', error);
            alert('An error occurred while shortening the link');
          }
        });

      //Handling Generating QrCode
      document
        .getElementById('generateQrCode')
        .addEventListener('submit', async function (event) {
          event.preventDefault();
          const shortUrl = document.getElementById('generateQrCode').value;
          try {
            // Make the POST request to your server
            const response = await fetch('/api/generate-qr-code', {
              // Replace with your actual endpoint
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                Authorization: `Bearer ${your_jwt_token}`, // Add your JWT token here
              },
              body: JSON.stringify({
                shortUrl: shortUrl,
              }),
            });

            if (response.ok) {
              const qrCodeUrl = await response.text();
              // Displaying the QR code image
              const img = document.createElement('img');
              img.src = qrCodeUrl;
              document.body.appendChild(img);
            } else {
              const error = await response.json();
              alert(`Error: ${error.message}`);
            }
          } catch (error) {
            console.error('Error:', error);
            alert('An error occurred while generating the QR code');
          }
        });

      //Handling customizing Short Url
      document
        .getElementById('customizeShortUrlForm')
        .addEventListener('submit', async function (event) {
          event.preventDefault();
          const customUrl = document.getElementById('customizingLink').value;
          const shortUrl = document.getElementById('originalShortUrl').value;

          try {
            // Make the POST request to your server
            const response = await fetch('/api/customize-short-url', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                Authorization: `Bearer ${your_jwt_token}`, // Add your JWT token here
              },
              body: JSON.stringify({
                customUrl: customUrl,
                shortUrl: shortUrl,
              }),
            });

            if (response.ok) {
              const result = await response.json();
              alert(`Customized URL: ${result.url}`);
            } else {
              const error = await response.json();
              alert(`Error: ${error.message}`);
            }
          } catch (error) {
            console.error('Error:', error);
            alert('An error occurred while customizing the link');
          }
        });
    </script>
  </body>
</html>